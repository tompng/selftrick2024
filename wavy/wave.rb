           t=(     s="     wav                   e=-               >c{     eva                           l(c.split(
           $/)   .map{   (_1                    *2)[/               #.+   #/]                            }.j
            oin .de let e('                     #'+ 32.               chr ))}                           ;class<<wa
             ve;de   f+(c)                     =call(c);                 end;w                         ave
              ").     tr"                    #$/     ",+                   '';                       eval(t)+%~

       s        .                s p  l  i      t(Re  g e   x    p    .  n  e # s p =3 2. c h        r   ; q =
                ) .                    z i  p (  [ 0,4,4       ,   5  ,  1 ,  1, 3# w (  s    p    +   ' +  ')
                3, 2                     , 2 ,  1  ,1,  1  ,  4  ,  1  , 4  ,1 , 3 ,  #      ,   3   ,  4  ,  4   ,
              * _ 1                         })   . join  #  3 ,  3  ,  4 ,  4 , 4  ,4    ]  .  m  a    p   {  s   p
            '                          +  s  p* 5  #;heade r  =  '  t  =  (  ' +   s  p  *  5 +   '     s   =   "
         '  + s                      p  *  4  +    35.c# +q+'  "   )   .  '       + s p  * 5  +       '   t    r    "
    *   4  +  "                    '       '     ;"#hr+'$/'   +    s    p         * 5+ '" ,      +      '   +    s    p
    h  r  ;                     h e  a          # +sp*5+'eval(      t             )  +% '+1         2      6   .  c
      e  r    s              = 1  0              00.times.map   {                    |t |hea d            e   r #  d
  x   {    |   l  ,        y   | a  t           # .lines.ma p                         . with_   i            n d e
  1    9     ,            1 1] ;               c t =l[30,#=l   [                       0  ,19];            b   t= l [
   ;    d     t  =  l[4   1.                .    ] ;ai,bi,ci,                             di=4.        #        11    ]
    0    0    4  * t + _  1             *      7  ; (2.#time                           s    .map           {  t h =0.
 4     .    *   3 + 1     i*              *      ( 5 *th+y*0 .           1                  )+1i          *   * ( 7* #
*  (      6   *  t h      -                      y *0 .3)).r#t       h                +      y*0.     2      )  + 1 i *
 s  p      *  ( 3 + a     i                        )+a t+sp *  (          1              #  e al.r o        u   n d  } ;
+        b   i-  a i       )+b                     t + sp*(1  6    +                c        i-bi)+c    t     +  #   6
  ( 1     6  + d  i     -     ci )                 + d t } . j    o               i          n };t=hea   #     s   p   *
 n d _        i n  d  e  x {    _                   1 .i ncl u    d                           e ?s}#ders.       f    i
  s =    c      .   l  i  n        e s  .           #  || 0;W =      1                          20;H=40;li  n         e
  m a p{_   1       .   s  p #        l  a           s  t(H ) ;      c                         h  ars=lines         .
    lin#lit            .  j  o          i  n  .        c har s   }                            ;  p ositions=
     es.sele           c   t  {          l  [   _       1 #es .   m                             a p{ |l|W.tim
    ,t{12.ti         #     ]   &         .  !             =sp}}; n                              o  ize=->x,y
    (2+i%3)  *     x     *    4           .  0              # mes.               s                um{|i|1i**(
   W+(i*8%17-            8     .       0   )                 *y/H -                          0     .004*(8+#/
  1))}. re al /      3      }      ;       e    =             #i % 5                        )       *t*(i%2*2-
  ';trap# 27.  c       h      r        ;     $     >           < <e                    +            ' [H'+e+'[J
 (:INT){  ex it }      ;     (   t .            .   )          .  e  a                           c    h{|t|ou#
 ime s.  m ap {   |       y   |   w =W-      y     /            ( H -                       #         tput=H.         t
 x# 1) ;p o  s            =   p  o s iti o       n   s           [y] .                  m             a p!{|x|
p =p o # + 0  .              1  + 0 . 2*n oi          z e        [x %   w                  ,          y ,t]};
 m e s {  p o s. m             a    p! {| v|         p  #         s[-  1      ]                   -    w; 2.ti
l i  n  e =  [ s              p  # = [   v, p+ 1]     . m    a     x          }                ;      p -=w};
c   s  =   c  ha            r  s  [ y ] ; c s.  s     i  z       e  .t                        i       m e#]*w      ;
 [   _    1   ] .      r   o   u   n # s { l  ine     [   p o        s i                              t ions[ y      ]
 }     ;     p  u    t s   #    d   %  w ]= cs[     _      1         ] } ;                             line.jo    i n
     1      0  0    0 ]   ,     '    '  # (e+"[   H    "    +           ( [ h                           eaders  [ t  %
)        .     g   s u  b    #      ,   o utput]. j    o i n            (                              $/)<<  12  6
      )      }     # ($   /       ,    e  +'[K'+$     /  ) )              ;                           sleep( 0. 0   2  ~

